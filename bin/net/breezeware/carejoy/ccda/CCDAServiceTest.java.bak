package net.breezeware.carejoy.ccda;

import java.util.UUID;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.testng.AbstractTestNGSpringContextTests;
import org.testng.annotations.Test;

import net.breezeware.carejoy.ccda.dto.SectionDto;
import net.breezeware.carejoy.ccda.service.api.CCDAService;

@ContextConfiguration(classes = TestApplication.class)
public class CCDAServiceTest extends AbstractTestNGSpringContextTests {
    Logger logger = LoggerFactory.getLogger(CCDAServiceTest.class);

    @Autowired
    CCDAService ccdaService;

    @Test
    public void sampleParserTest() {
        logger.info("Entering sampleParserTest()");

        // String uniqueId = "Kenneth_Shabo_ccda_d564f397-4c53-4605-8e43-654c2b318550";
        long id = 3;
        UUID patientId = null;

        try {
            ccdaService.parseAndPersistCcda(patientId, id);
        } catch (Exception e) {
            e.printStackTrace();
        }

        logger.info("Leaving sampleParserTest()");
    }

    @Test
    public void getCcdaSectionDto() {
        logger.info("Entering getCcdaSectionDto()");

        long ccdaUploadId = 4;
        String sectionName = "allergy";

        SectionDto sectionDto = ccdaService.getCcdaSectionDto(ccdaUploadId, sectionName);
        logger.info("sectionDto = {}", sectionDto);

        logger.info("Leaving getCcdaSectionDto()");
    }

}